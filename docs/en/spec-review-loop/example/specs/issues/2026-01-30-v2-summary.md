# Spec Review Processing Summary

Reviewed: 2026-01-30-v2.md (Codex verification report)

---

## Issue Processing

| Issue ID | Title | Decision | Changes Applied | Guide Rules |
|----------|-------|----------|-----------------|-------------|
| 1 | Langfuse tracing can leak PII/auth tokens | Already Resolved | None | G11 |
| 2 | Execution awaiting user input state representation | Accepted | Added `blocking_prompt` field to ExecutionPlan; updated invariants | G10 |
| 3 | Booking domain contracts missing | Declined | None | G9 |
| 4 | Service interface boundary contracts underspecified | Accepted (modified) | Enhanced Service Interface with typed inputs/outputs, error cases, contract references; added Cancel Plan to deferred scope | G8 |

---

## Summary

### Accepted Changes

**Issue 2:** Added `blocking_prompt` optional field to ExecutionPlan contract. When set during `executing` status, indicates the plan is paused awaiting user response. Updated invariants in design spec to clarify when this field is set/cleared. This provides downstream systems (IQ/orchestration) a clear signal to distinguish "actively executing" vs "blocked on user input."

**Issue 4:** Enhanced Service Interface section with:
- Typed inputs (user message, session_id, auth token)
- Explicit output variants (plan response, clarification response, error response) with contract references
- Error cases for Confirm Plan (404 not found, 409 conflict)
- Get Plan Status now mentions `blocking_prompt` field
- Status Updates trigger on `blocking_prompt` set
- Explicitly documented "Cancel Plan" as not in MVP scope (both in design spec and README deferred list)

### Declined Suggestions

**Issue 3:** Creating speculative "normalized booking contracts" when the external ROLLER API shape is explicitly unknown. See feedback file for detailed reasoning.

### Already Resolved

**Issue 1:** Human reviewer previously confirmed existing Langfuse data cleaning pipeline handles PII/token redaction at infrastructure level. No spec-level changes required.

---

## Files Modified

- `specs/contracts/data-definitions.md` — Added `blocking_prompt` field to ExecutionPlan
- `specs/2026-01-29-booking-updates-design.md` — Updated invariants; enhanced Service Interface section
- `specs/README.md` — Added explicit plan cancellation to deferred scope
